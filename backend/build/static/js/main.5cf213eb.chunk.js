(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{339:function(e,t,a){e.exports=a(581)},580:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),u=a.n(c),l=a(22),o=a(87),i=a(297),s=a(298),m=a(8),d=a.n(m),p=a(13),f=a(30),E=a(5),b=a(27),v=a.n(b),O=function(e){localStorage.setItem("LoggedUser",JSON.stringify(e))},j=function(){var e=localStorage.getItem("LoggedUser");return e?JSON.parse(e):null},h=function(){localStorage.removeItem("LoggedUser")},y=function(){var e=j();return e?{headers:{Authorization:"bearer ".concat(e.token)}}:{headers:{Authorization:"bearer FalseToken"}}},g=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/tour");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("/api/tour","/museum/").concat(a),t,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/tour","/").concat(n,"/museum/").concat(a),t,y());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),_={getAll:g,addTour:k,deleteTour:function(){var e=Object(p.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat("/api/tour","/").concat(a,"/museum/").concat(t),y());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),updateTour:S},C={tours:{},finished:!0,notification:{message:"",error:!0}},R=function(e,t,a){return function(){var n=Object(p.a)(d.a.mark((function n(r){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"START_UPDATE"}),n.prev=1,n.next=4,_.updateTour(e,t,a);case 4:c=n.sent,r({type:"UPDATE_TOUR_SUCCESS",payload:c,notification:{message:"".concat(e.tourName," p\xe4ivitetty!"),error:!1}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r({type:"UPDATE_TOUR_ERROR",notification:{message:n.t0.response.data,error:!0}});case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_TOURS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,finished:!0,tours:Object(E.a)({},t.payload.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(f.a)({},t._id,t))}),{}))});case"GET_ALL_TOURS_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"UPDATE_TOUR_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,finished:!0,tours:Object(E.a)(Object(E.a)({},e.tours),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"UPDATE_TOUR_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"START_UPDATE":return Object(E.a)(Object(E.a)({},e),{},{finished:!1});default:return e}},w=a(330),x=a(299),U=a.n(x),N=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/museum");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,c,u,l,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new U.a,n=Object.keys(t),r=Object.values(t),c=0;c<n.length;c++)"image"!==(u=n[c])&&"open"!==u&&"closed"!==u?a.append(u,r[c]):"image"!==u&&a.append(u,JSON.stringify(r[c]));return t.image&&a.append("image",t.image,null===(l=t.image)||void 0===l?void 0:l.name),e.next=7,v.a.post("/api/museum",a,{headers:{Authorization:y().headers.Authorization,"Content-Type":"multipart/form-data"}});case 7:return o=e.sent,e.abrupt("return",o.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/museum","/").concat(a),t,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D={getAll:N,addMuseum:M,deleteMuseum:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat("/api/museum","/").concat(t),y());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateMuseum:A,sendRequest:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/museum","/").concat(a,"/request"),{id:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeRequest:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/museum","/").concat(a,"/request/remove"),{id:t},y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},L={museums:{},finished:!0,notification:{message:"",error:!1}},I=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.getAll();case 3:a=e.sent,t({type:"GET_ALL_MUSEUMS_SUCCESS",payload:a,notification:{message:"",error:!1}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"GET_ALL_MUSEUMS_ERROR",notification:{message:e.t0.response.data,error:!0}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},K=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,_.addTour(e,t);case 3:r=a.sent,n({type:"ADD_TOUR_SUCCESS",payload:r,notification:{message:"".concat(e.tourName," lis\xe4tty!"),error:!1}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"ADD_TOUR_ERROR",notification:{message:a.t0.response.data,error:!0}});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},P=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.sendRequest(e,t);case 3:r=a.sent,n({type:"USER_REQUEST_SUCCESS",payload:r,notification:{message:"Pyynt\xf6 l\xe4hetetty",error:!1}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"USER_REQUEST_ERROR",notification:{message:a.t0.response.data,error:!0}});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},V=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.removeRequest(e,t);case 3:r=a.sent,n({type:"REMOVE_REQUEST_SUCCESS",payload:r,notification:{message:"Pyynt\xf6 poistettu",error:!1}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"REMOVE_REQUEST_ERROR",notification:{message:a.t0.response.data,error:!0}});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_MUSEUMS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object(E.a)({},t.payload.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(f.a)({},t._id,t))}),{}))});case"GET_ALL_MUSEUMS_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"ADD_TOUR_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object(E.a)(Object(E.a)({},e.museums),{},Object(f.a)({},t.payload.museumId,Object(E.a)(Object(E.a)({},e.museums[t.payload.museumId]),{},{offeredTours:[].concat(Object(w.a)(e.museums[t.payload.museumId].offeredTours),[t.payload.tour])})))});case"ADD_TOUR_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"UPDATE_MUSEUM_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object(E.a)(Object(E.a)({},e.museums),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"UPDATE_MUSEUM_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"DELETE_MUSEUM_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object.values(e.museums).filter((function(e){return e._id!==t.id})).reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(f.a)({},t._id,t))}),{})});case"DELETE_MUSEUM_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"DELETE_TOUR_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object(E.a)(Object(E.a)({},e.museums),{},Object(f.a)({},t.museumId,Object(E.a)(Object(E.a)({},e.museums[t.museumId]),{},{offeredTours:e.museums[t.museumId].offeredTours.filter((function(e){return e._id!==t.tourId}))})))});case"DELETE_TOUR_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"USER_REQUEST_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object(E.a)(Object(E.a)({},e.museums),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"USER_REQUEST_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"REMOVE_REQUEST_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,museums:Object(E.a)(Object(E.a)({},e.museums),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"REMOVE_REQUEST_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});default:return e}},F=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/user");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("/api/user","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/user",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/user","/").concat(a),t,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/user","/").concat(t,"/museum/").concat(a),null,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z={getAll:F,getOne:H,addUser:q,deleteUser:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat("/api/user","/").concat(t),y());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:Q,addUserToMuseum:B,addReservation:function(){var e=Object(p.a)(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("/api/user","/").concat(t,"/museum/").concat(a,"/reservedtour"),n,y());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),confirmTour:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/user","/").concat(a,"/tour/").concat(t),null,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},J={users:{},finished:!0,notification:{message:"",error:!1}},Y=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z.addUser(e);case 3:n=t.sent,a({type:"ADD_USER_SUCCESS",payload:n,notification:{message:"".concat(e.name," lis\xe4tty"),error:!1}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"ADD_USER_ERROR",notification:{message:t.t0.response.data,error:!0}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"START_UPDATE"}),a.prev=1,a.next=4,D.addMuseum(e);case 4:r=a.sent,n({type:"ADD_MUSEUM_SUCCESS",payload:r,id:t,notification:{message:"".concat(e.museumName," lis\xe4tty!"),error:!1}}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),n({type:"ADD_MUSEUM_ERROR",notification:{message:a.t0.response.data,error:!0}});case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},X=function(e,t,a){return function(){var n=Object(p.a)(d.a.mark((function n(r){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,z.addReservation(e,t,a);case 3:c=n.sent,r({type:"ADD_RESERVATION_SUCCESS",payload:c,notification:{message:"Varaus lis\xe4tty",error:!1}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:"ADD_RESERVATION_ERROR",notification:{message:n.t0.response.data,error:!0}});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object(E.a)({},t.payload.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(f.a)({},t._id,t))}),{}))});case"GET_USERS_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"ADD_USER_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object(E.a)(Object(E.a)({},e.users),{},Object(f.a)({},t.payload._id,t.payload))});case"ADD_USER_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"UPDATE_USER_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object(E.a)(Object(E.a)({},e.users),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"UPDATE_USER_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"ADD_USER_TO_MUSEUM_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object(E.a)(Object(E.a)({},e.users),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"ADD_USER_TO_MUSEUM_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"ADD_MUSEUM_SUCCESS":var a=e.users[t.id],n="Admin"===a.type?a:void 0;if(!n)return e;var r=Object(E.a)(Object(E.a)({},n),{},{museums:n.museums.concat(t.payload)});return Object(E.a)(Object(E.a)({},e),{},{finished:!0,notification:t.notification,users:Object(E.a)(Object(E.a)({},e.users),{},Object(f.a)({},t.id,r))});case"ADD_MUSEUM_ERROR":return Object(E.a)(Object(E.a)({},e),{},{finished:!0,notification:t.notification});case"DELETE_USER_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object.values(e.users).filter((function(e){return e._id!==t.id})).reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(f.a)({},t._id,t))}),{})});case"DELETE_USER_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"ADD_RESERVATION_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object(E.a)(Object(E.a)({},e.users),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"ADD_RESERVATION_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"CONFIRM_TOUR_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification,users:Object(E.a)(Object(E.a)({},e.users),{},Object(f.a)({},t.payload._id,Object(E.a)({},t.payload)))});case"CONFIRM_TOUR_ERROR":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});case"START_UPDATE":return Object(E.a)(Object(E.a)({},e),{},{finished:!1});default:return e}},$={_id:"",username:"",name:"",passwordHash:"",type:void 0,token:""},ee=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"LOGIN",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var a=t.payload,n=a._id,r=a.username,c=a.name,u=a.passwordHash,l=a.type,o=a.token,i=[];return"Admin"===t.payload.type&&(i=t.payload.museums),{_id:n,username:r,name:c,passwordHash:u,type:l,token:o,museums:i};case"LOGOUT":return{_id:"",username:"",name:"",passwordHash:"",type:void 0,token:"",museums:[]};default:return e}},ae={notification:{message:"",error:!1}},ne=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"ADD_NOTIFICATION",notification:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTIFICATION":return Object(E.a)(Object(E.a)({},e),{},{notification:t.notification});default:return e}},ce={getKey:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/key");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},ue={mapbox:""},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_KEY":return Object(E.a)(Object(E.a)({},e),{},{mapbox:t.payload});default:return e}},oe=Object(o.combineReducers)({tours:T,museums:G,users:Z,login:te,notification:re,key:le}),ie=Object(o.createStore)(oe,Object(i.composeWithDevTools)(Object(o.applyMiddleware)(s.a))),se=a(77),me=a(317),de=a(316),pe=a(606),fe=a(594),Ee=a(65),be=a(602),ve=a(585),Oe=function(){var e=Object(l.b)(),t=Object(se.g)().id,a=function(a){e(function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,_.deleteTour(e,t);case 3:n({type:"DELETE_TOUR_SUCCESS",tourId:t,museumId:e,notification:{message:"Tour deleted",error:!1}}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),n({type:"DELETE_TOUR_ERROR",notification:{message:a.t0.response.data,error:!0}});case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},n=Object(se.f)(),c=Object(l.c)((function(e){var a;return null===(a=e.museums.museums[t])||void 0===a?void 0:a.offeredTours}))||void 0;return c?r.a.createElement("div",{className:"centerText"},r.a.createElement(be.a,{id:"tourList",divided:!0},c&&Object.values(c).map((function(e){return r.a.createElement(be.a.Content,{key:e._id},r.a.createElement("b",{onClick:function(){return a=e._id,void n.push("/museum/".concat(t,"/tour/").concat(a));var a}}," ",e.tourName),r.a.createElement(be.a.List,null,r.a.createElement(be.a.Item,null,e.lengthInMinutes),r.a.createElement(be.a.Item,null,e.price)),r.a.createElement(ve.a,{type:"button",onClick:function(){return a(e._id)}},"Poista"))})))):null},je=a(15),he=a(26),ye=a(599),ge=a(313),ke=a.n(ge),Se=function(e,t){var a=[t.open.sun,t.open.mon,t.open.tue,t.open.wed,t.open.thu,t.open.fri,t.open.sat],n=[t.closed.sun,t.closed.mon,t.closed.tue,t.closed.wed,t.closed.thu,t.closed.fri,t.closed.sat];return e?a:n},_e=function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return"".concat(a,".").concat(n,".").concat(r)},Ce=function(e,t){var a=parseInt(e.slice(0,2),10),n=parseInt(e.slice(3,5),10);a+=(t-t%60)/60,(n+=t%60)<0&&(a-=1,n=60+n),n>59&&(a+=1,n=0+n-60),a<0&&(a=0,n=0),a>23&&(a=23,n=59);var r=a.toString(),c=n.toString();return a<10&&(r="0".concat(a)),n<10&&(c="0".concat(n)),"".concat(r,":").concat(c)},Re=function(e,t){var a=parseInt(e.slice(0,2),10),n=parseInt(e.slice(3,5),10),r=parseInt(t.slice(0,2),10),c=parseInt(t.slice(3,5),10);return a===r&&n===c?0:a>r?1:a<r?-1:n>c?1:-1},Te=function(e){if("closed"===e)return!0;if(5!==e.length)return!1;if(":"!==e.substr(2,1))return!1;var t=e.substr(0,2),a=e.substr(3,2);return"0"===t.substr(0,1)&&(t=t.substr(1,1)),"0"===a.substr(0,1)&&(a=a.substr(1,1)),Boolean(Number(a)>-1&&Number(a)<60&&Number(t)>-1&&Number(t)<24)},we=function(e){var t=e.field,a=e.label,n=e.min,c=e.max,u=e.placeholder;return r.a.createElement(ye.a.Field,null,r.a.createElement("label",null,a),r.a.createElement(je.b,Object.assign({placeholder:u},t,{type:"number",min:n,max:c})),r.a.createElement("div",{style:{color:"red"}},r.a.createElement(je.a,{name:t.name})))},xe=function(e){var t=e.field,a=e.label,n=e.placeholder;return r.a.createElement(ye.a.Field,null,r.a.createElement("label",null,a),r.a.createElement(je.b,Object.assign({placeholder:n},t)),r.a.createElement("div",{style:{color:"red"}},r.a.createElement(je.a,{name:t.name})))},Ue=function(e){var t=e.label,a=e.name,n=e.options;return r.a.createElement(ye.a.Field,null,r.a.createElement("label",null,t),r.a.createElement(je.b,{as:"select",className:"ui dropdown",name:a},n.map((function(e){return r.a.createElement("option",{key:e.label,value:e.value},e.label)}))))},Ne=function(e){var t=e.label,a=e.name,n=e.options;return r.a.createElement(ye.a.Field,null,r.a.createElement("label",null,t),r.a.createElement(je.b,{as:"select",className:"ui dropdown",name:a},n.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))},Me=function(e){var t=e.fieldName,a=e.field,n=e.label,c=e.values,u=t;return r.a.createElement(ye.a.Field,null,r.a.createElement("label",null,n),r.a.createElement(je.c,{name:u,render:function(e){return r.a.createElement("div",null,c&&c.length>0?c.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(je.b,{name:"".concat(u,".").concat(a)}),r.a.createElement(ve.a,{className:"add",type:"button",onClick:function(){return e.remove(a)}},"-"),r.a.createElement(ve.a,{className:"add",type:"button",onClick:function(){return e.insert(a,"")}},"+"))})):r.a.createElement(ve.a,{type:"button",onClick:function(){return e.push("")}},"Lis\xe4\xe4 kieli"))}}),r.a.createElement("div",{style:{color:"red"}},r.a.createElement(je.a,{name:a.name})))},Ae=function(e){var t=e.name,a=Object(je.g)().setFieldValue,n=Object(je.f)(t),c=Object(he.a)(n,1)[0];return r.a.createElement("input",{type:"file",accept:".jpg, .png",name:"file",id:"fileInput",onChange:function(e){return function(e){e.target.files&&e.target.files[0]&&a(c.name,e.target.files[0])}(e)}})},De=function(e){var t=e.name,a=Object(je.g)().setFieldValue,n=Object(je.f)(t),c=Object(he.a)(n,1)[0];return r.a.createElement("div",null,r.a.createElement(ke.a,{selected:c.value&&new Date(c.value)||null,onChange:function(e){a(c.name,e),a("time","")},inline:!0}))},Le=function(e){var t=e.museum,a=e.name,n=e.date,c=e.tour,u=Object(je.g)().setFieldValue,l=Object(je.f)(a),o=Object(he.a)(l,1)[0],i=function(){var e=n.getDay(),a=Se(!0,t),r=Se(!1,t),u=a[e],l=r[e],o=t.reservedTours.filter((function(e){return _e(new Date(e.date))===_e(new Date(n))})),i=[],s=u;if("closed"===u||"closed"===l||_e(new Date)===_e(n)||new Date>n||!Te(u)||!Te(l))return[];for(var m=function(){var e=s,t=o.find((function(t){return t.time===e}));t?(s=Ce(s,t.lengthInMinutes-t.lengthInMinutes%15),t.lengthInMinutes%15!==0&&(s=Ce(s,15))):(i=i.concat(s),s=Ce(s,15))};Re(s,Ce(l,-c.lengthInMinutes))<1;)m();return i}();return r.a.createElement("div",null,r.a.createElement(pe.a,null,"Valittu aika: ",o.value),r.a.createElement(fe.a,{centered:!0,columns:5},0!==i.length&&i.map((function(e){return r.a.createElement(de.a,{key:e},r.a.createElement("b",{className:e,onClick:function(){return u(o.name,e)}},e))})),0===i.length&&r.a.createElement(pe.a,null,"Ei vapaita aikoja")))},Ie={possibleLanguages:[""],lengthInMinutes:0,tourName:"",maxNumberOfPeople:0,price:0,tourInfo:""},Ke=function(e){var t=e.onSubmit,a=e.onCancel,n=e.initialTour;return r.a.createElement(je.e,{initialValues:n||Ie,onSubmit:function(e,a){var n=a.resetForm;t(e),n()},validate:function(e){var t={};return 0===e.possibleLanguages.length&&(t.possibleLanguages="Kentt\xe4 vaaditaan"),e.lengthInMinutes,e.tourName||(t.tourName="Kentt\xe4 vaaditaan"),e.maxNumberOfPeople||(t.maxNumberOfPeople="Kentt\xe4 vaaditaan"),e.price||(t.price="Kentt\xe4 vaaditaan"),t}},(function(e){var t=e.isValid,c=e.dirty,u=(e.setFieldValue,e.setFieldTouched,e.values);e.errors,e.touched;return r.a.createElement(je.d,{className:"form ui"},r.a.createElement(je.b,{label:"Opastuksen nimi",placeholder:"Opastuksen nimi",name:"tourName",component:xe}),r.a.createElement(je.b,{label:"Opastuksen kielet",name:"possibleLanguages",fieldName:"possibleLanguages",component:Me,values:u.possibleLanguages}),r.a.createElement(je.b,{label:"Opastuksen kesto",placeholder:"Opastuksen kesto",name:"lengthInMinutes",component:we,min:0,max:1e3}),r.a.createElement(je.b,{label:"Opastuksen hinta",placeholder:"Opastuksen hinta",name:"price",component:we,min:0,max:1e3}),r.a.createElement(je.b,{label:"Opastuksen maksimikoko",placeholder:"Opastuksen maksimikoko",name:"maxNumberOfPeople",component:we,min:0,max:1e3}),r.a.createElement(je.b,{label:"Opastuksen lis\xe4tiedot",placeholder:"Opastuksen lis\xe4tiedot",name:"tourInfo",component:xe}),r.a.createElement(ve.a,{type:"submit",name:"submit",disabled:!c||!t},"Lis\xe4\xe4!"),n&&r.a.createElement(ve.a,{onClick:a,name:"cancelForm",color:"red"},"Peruuta"))}))},Pe=Ke,Ve=function(e){var t=e.museum,a=Object(l.b)(),n=Object(se.f)(),c=function(){var e=Object(p.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(K(n,t._id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){n.push("/reservation/".concat(e))},o=function(e){a(function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z.addUserToMuseum(e,t);case 3:r=a.sent,n({type:"ADD_USER_TO_MUSEUM_SUCCESS",payload:r,notification:{message:"K\xe4ytt\xe4j\xe4 lis\xe4tty museoon",error:!1}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"ADD_USER_TO_MUSEUM_ERROR",notification:{message:a.t0.response.data,error:!0}});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(e,t._id)),a(V(e,t._id))},i=function(e){var t=e.r;return r.a.createElement(me.a,{key:t._id,columns:4,onClick:function(){return u(t._id)}},r.a.createElement(de.a,null,r.a.createElement("b",null,t.time," ",_e(new Date(t.date)))),r.a.createElement(de.a,null,r.a.createElement("b",null," ",t.tourName)),r.a.createElement(de.a,null,r.a.createElement("p",null,t.groupName)),r.a.createElement(de.a,null,r.a.createElement("i",null,t.guide.name)))};return t?r.a.createElement("div",null,r.a.createElement(pe.a,{as:"h2"},"Museon opastukset"),r.a.createElement(fe.a,{centered:!0,id:"basicGrid",columns:1},r.a.createElement(fe.a,{centered:!0,divided:"vertically",columns:2},r.a.createElement(fe.a.Column,null,r.a.createElement(pe.a,{className:"centerText",as:"h3"},"Nykyiset opastukset"),r.a.createElement(Oe,null)),r.a.createElement(fe.a.Column,null,r.a.createElement(pe.a,{className:"centerText",as:"h3"},"Lis\xe4\xe4 opastus"),r.a.createElement("div",{className:"centerText"},r.a.createElement(Ke,{onSubmit:c,onCancel:function(){}})))),r.a.createElement(fe.a,{className:"addTopMargin"},r.a.createElement(me.a,{columns:3},r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,null,r.a.createElement(me.a,{centered:!0,columns:"1"},r.a.createElement(pe.a,null,"Vahvistamattomat opastukset")),t.reservedTours.map((function(e){return!e.confirmed&&new Date(e.date)>=new Date?r.a.createElement(me.a,{key:e._id,columns:1,onClick:function(){return u(e._id)}},r.a.createElement(i,{r:e,key:e._id})):null})))),r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,null,r.a.createElement(me.a,{centered:!0,columns:"1"},r.a.createElement(pe.a,null,"Vahvistetut opastukset")),t.reservedTours.map((function(e){return e.confirmed&&new Date(e.date)>=new Date?r.a.createElement(me.a,{key:e._id,columns:1,onClick:function(){return u(e._id)}},r.a.createElement(i,{r:e,key:e._id})):null})))),r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,null,r.a.createElement(me.a,{columns:"1",centered:!0},r.a.createElement(pe.a,null,"Menneet opastukset")),t.reservedTours.map((function(e){return new Date(e.date)<new Date?r.a.createElement(me.a,{key:e._id,columns:1,onClick:function(){return u(e._id)}},r.a.createElement(i,{r:e,key:e._id})):null})))))),r.a.createElement(fe.a,{className:"addTopMargin",columns:"1"},r.a.createElement(de.a,null,r.a.createElement(pe.a,{className:"centerText"},"K\xe4ytt\xe4j\xe4pyynn\xf6t")),r.a.createElement(fe.a,{name:"requests",columns:4},t.userRequests.map((function(e){return r.a.createElement(fe.a.Row,{centered:!0,key:e._id},r.a.createElement(fe.a.Column,null,r.a.createElement("div",{className:"centerText"},r.a.createElement("p",null,e.name))),r.a.createElement(fe.a.Column,{centered:!0,className:"centerText"},r.a.createElement("div",{className:"centerText"},r.a.createElement("b",null,e.type))),r.a.createElement(fe.a.Column,null,r.a.createElement("div",{className:"centerText"},r.a.createElement(Ee.a,{className:"centerText",name:"heart outline",color:"blue",onClick:function(){return o(e._id)}}))),r.a.createElement(fe.a.Column,null,r.a.createElement("div",{className:"centerText"},r.a.createElement(Ee.a,{className:"centerText",name:"ban",color:"red",onClick:function(){return n=e._id,void a(V(n,t._id));var n}}))))})))))):r.a.createElement(pe.a,{as:"h2"},"Museota ei l\xf6ytynyt")},Ge=a(329),Fe=a(120),He=a(607),qe=a(155),Qe=a(209),Be=a.n(Qe),ze=(a(273),{position:"absolute",width:"100%",height:"100%"}),Je=function(e){var t=e.lat,a=e.long,c=Object(n.useRef)(null),u=Object(l.c)((function(e){return e.key.mapbox}));return Object(n.useEffect)((function(){if(!(!t||!a||isNaN(t)||isNaN(a)||t>90||t<-90||a>90||a<-90)&&u&&(Be.a.accessToken=u,c.current)){var e=new Be.a.Map({container:c.current,style:"mapbox://styles/mapbox/streets-v11",center:[a,t],zoom:15});return function(){return e.remove()}}}),[t,a,u]),r.a.createElement("div",{ref:c,style:ze})},Ye=function(e){var t=e.museum,a=e.user,c=[{day:"Maanantai",open:t.open.mon,closed:t.closed.mon},{day:"Tiistai",open:t.open.tue,closed:t.closed.tue},{day:"Keskiviikko",open:t.open.wed,closed:t.closed.wed},{day:"Torstai",open:t.open.thu,closed:t.closed.thu},{day:"Perjantai",open:t.open.fri,closed:t.closed.fri},{day:"Lauantai",open:t.open.sat,closed:t.closed.sat},{day:"Sunnuntai",open:t.open.sun,closed:t.closed.sun}],u=Object(se.f)(),o=Object(l.b)(),i=Object.values(t.offeredTours).length,s=Boolean(t.userRequests.find((function(e){return e._id===(!!a&&a._id)}))),m=function(e){i<2||k(e?g===i-1?0:g+1:0===g?i-1:g-1)},f=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(P(a._id,t._id));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(n.useState)({_id:"0",possibleLanguages:[],lengthInMinutes:0,tourName:"Ei opastuksia",maxNumberOfPeople:0,price:0,tourInfo:"Museo ei tarjoa t\xe4ll\xe4 hetkell\xe4 opastuksia"}),v=Object(he.a)(b,2),O=v[0],j=v[1],h=Object(n.useState)(0),y=Object(he.a)(h,2),g=y[0],k=y[1];return Object(n.useEffect)((function(){0!==i&&j(Object.values(t.offeredTours)[0])}),[t.offeredTours,i]),Object(n.useEffect)((function(){0!==i&&j(Object.values(t.offeredTours)[g])}),[g,t.offeredTours,i]),r.a.createElement("div",null,r.a.createElement(fe.a,{divided:!0,id:"basicGrid"},r.a.createElement(me.a,{columns:"2"},r.a.createElement(de.a,{className:"addTopMargin"},r.a.createElement(fe.a,{columns:"equal"},r.a.createElement(me.a,null,r.a.createElement(de.a,null,r.a.createElement(pe.a,null,"Aukiolo: "))),c.map((function(e){return r.a.createElement(me.a,{key:e.day},r.a.createElement(de.a,null,r.a.createElement("h4",null,e.day,": ")),r.a.createElement(de.a,null,r.a.createElement("p",null,e.open," - ",e.closed)))})),r.a.createElement(me.a,null,r.a.createElement(de.a,null,r.a.createElement("h4",null,"Lis\xe4tietoja: ")),r.a.createElement(de.a,null,r.a.createElement("p",null,t.openInfo))))),r.a.createElement(de.a,{className:"addTopMargin"},r.a.createElement(fe.a,null,r.a.createElement(me.a,{centered:!0},r.a.createElement(pe.a,null,t.museumName)),r.a.createElement(me.a,{centered:!0},t.image&&r.a.createElement(Ge.a,{src:"http://localhost:3001/uploads/".concat(t.image)}),!t.image&&r.a.createElement(Fe.a,null," Ei kuvaa saatavilla")),r.a.createElement(me.a,{centered:!0},r.a.createElement(pe.a,null,"Opastukset")),r.a.createElement(me.a,{centered:!0},r.a.createElement(de.a,{width:"1"},r.a.createElement(Ee.a,{name:"angle double left",onClick:function(){return m(!1)}})),r.a.createElement(de.a,{width:"10"},r.a.createElement(He.a,{centered:!0},r.a.createElement(He.a.Content,null,r.a.createElement(qe.a,null,O.tourName),r.a.createElement(He.a.Description,null,O.tourInfo)),"0"!==O._id&&r.a.createElement(He.a.Content,{id:"extraInfo",extra:!0,onClick:function(){return e=t._id,a=O._id,void u.push("/museum/".concat(e,"/tour/").concat(a));var e,a}},r.a.createElement("b",null,"Lis\xe4tiedot ja varaukset")))),r.a.createElement(de.a,null,r.a.createElement(Ee.a,{name:"angle double right",onClick:function(){return m(!0)}})))))),r.a.createElement(me.a,{centered:!0},r.a.createElement(pe.a,{textAlign:"center"},"Sijainti")),r.a.createElement(me.a,{centered:!0},r.a.createElement("b",null,t.location)),r.a.createElement(me.a,{centered:!0},r.a.createElement("div",{className:"box"},r.a.createElement(Je,{lat:t.lat,long:t.long}))),r.a.createElement(me.a,{className:"addTopMargin",centered:!0},a&&"Customer"!==a.type&&!a.museums.find((function(e){return e._id===t._id}))&&r.a.createElement("div",null,r.a.createElement("p",null,"Oletko t\xe4m\xe4n museon henkil\xf6kuntaa? L\xe4het\xe4 pyynt\xf6!"),r.a.createElement(ve.a,{onClick:f,disabled:s},"L\xe4het\xe4!"),s&&r.a.createElement("p",null,"Olet jo l\xe4hett\xe4nyt pyynn\xf6n")))))},We=a(595),Xe=function(){var e=Object(se.g)().id,t=Object(l.c)((function(e){return e.users.users[e.login._id]})),a=Object(l.c)((function(t){return t.museums.museums[e]}));return a?t&&"Admin"===t.type&&t.museums.find((function(e){return e._id===a._id}))?r.a.createElement(Ve,{museum:a}):r.a.createElement(Ye,{museum:a,user:t}):r.a.createElement(We.a,{active:!0})},Ze=a(598),$e=a(39),et=a(603),tt=a(600),at=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.initialTour;return r.a.createElement(tt.a,{id:"updateTourModal",open:t,onClose:a,closeIcon:!0},r.a.createElement(tt.a.Header,null,"P\xe4ivit\xe4 opastusta"),r.a.createElement(tt.a.Content,null,r.a.createElement(Pe,{onSubmit:n,onCancel:a,initialTour:c})))},nt=[{label:"K\xe4teinen",value:"Cash"},{label:"Lasku",value:"Bill"},{label:"Maksukortti",value:"Card"},{label:"Jokin muu, tarkenna lis\xe4tiedoissa",value:"Other"}],rt=function(e){var t=e.onSubmit,a=e.onCancel,c=e.tour,u=e.museum,l=Object(n.useState)(!1),o=Object(he.a)(l,2),i=o[0],s=o[1],m=Object(E.a)(Object(E.a)({},c),{},{chosenLanguage:"",groupName:"",numberOfPeople:0,groupAge:"",paymentMethod:"Cash",time:"",date:new Date,email:"",groupInfo:""});return r.a.createElement(je.e,{initialValues:Object(E.a)(Object(E.a)({},m),{},{chosenLanguage:Object.values(c.possibleLanguages)[0]}),onSubmit:function(e,a){var n=a.resetForm;t(e),s(!1),n()},validate:function(e){var t="Kentt\xe4 vaaditaan",a={};return e.chosenLanguage||(a.chosenLanguage=t),e.groupName||(a.groupName=t),e.numberOfPeople||(a.numberOfPeople=t),e.numberOfPeople>c.maxNumberOfPeople&&(a.numberOfPeople="Liian monta osallistujaa. Max. ".concat(c.maxNumberOfPeople)),e.groupAge||(a.groupAge=t),e.paymentMethod||(a.paymentMethod=t),e.time||(a.time=t),e.date||(a.date=t),e.email||(a.email=t),a}},(function(e){var t=e.isValid,n=e.dirty,l=(e.setFieldValue,e.setFieldTouched,e.values),o=(e.errors,e.touched,e.handleSubmit);return r.a.createElement(je.d,{className:"form ui"},r.a.createElement(je.b,{label:"Ryhm\xe4n nimi",placeholder:"Ryhm\xe4n nimi",name:"groupName",component:xe}),r.a.createElement(Ne,{label:"Valittu kieli",name:"chosenLanguage",options:c.possibleLanguages}),r.a.createElement(je.b,{label:"Osallistujien m\xe4\xe4r\xe4",placeholder:"Osallistujien m\xe4\xe4r\xe4",name:"numberOfPeople",component:we,min:1,max:c.maxNumberOfPeople}),r.a.createElement(je.b,{label:"Osallistujien ik\xe4ryhm\xe4",placeholder:"Osallistujien ik\xe4ryhm\xe4",name:"groupAge",component:xe}),r.a.createElement(Ue,{label:"Maksutapa",name:"paymentOptions",options:nt}),r.a.createElement(je.b,{label:"Lis\xe4tiedot",placeholder:"Lis\xe4tiedot",name:"groupInfo",component:xe}),r.a.createElement(je.b,{label:"S\xe4hk\xf6posti",placeholder:"S\xe4hk\xf6posti",name:"email",component:xe}),r.a.createElement(fe.a,{columns:2},r.a.createElement(de.a,null,r.a.createElement(De,{name:"date"})),r.a.createElement(de.a,null,r.a.createElement(Le,{name:"time",museum:u,tour:c,date:l.date}))),r.a.createElement(tt.a,{textallign:"center",open:i,name:"confirm"},r.a.createElement(pe.a,null,"Varmistus"),r.a.createElement(tt.a.Content,null,"Hyv\xe4ksy varaus antamillasi tiedoilla?"),r.a.createElement(tt.a.Actions,null,r.a.createElement(ve.a,{color:"green",type:"submit",name:"submit",onClick:function(){return o()}},"Varaa!"),r.a.createElement(ve.a,{color:"red",type:"button",name:"closeConfirmation",onClick:function(){s(!1)}},"Peruuta"))),r.a.createElement(ve.a,{type:"button",onClick:function(){return s(!0)},name:"ready",disabled:!t||!n},"Varaa!"),r.a.createElement(ve.a,{type:"button",onClick:a,name:"cancelForm",color:"red"},"Peruuta"))}))},ct=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.tour,u=e.museum;return r.a.createElement(tt.a,{id:"reserveTourModal",open:t,onClose:a,closeIcon:!0},r.a.createElement(tt.a.Header,{id:"modalHeader"},"Varaa opastus"),r.a.createElement(tt.a.Content,null,r.a.createElement(rt,{onSubmit:n,onCancel:a,tour:c,museum:u})))},ut=function(){var e=Object(se.g)(),t=e.tourid,a=e.museumid,c=Object(l.b)(),u=Object(l.c)((function(e){return e.museums.museums[a]})),o=Object(l.c)((function(e){return e.tours.finished})),i=Object(l.c)((function(e){return e.users.users[e.login._id]}));Object(n.useEffect)((function(){c(I())}),[o,c]);var s=Object(n.useState)(!1),m=Object(he.a)(s,2),f=m[0],E=m[1],b=Object(n.useState)(!1),v=Object(he.a)(b,2),O=v[0],j=v[1],h=function(e){e?E(!0):j(!0)},y=function(e){e?E(!1):j(!1)},g=function(){var e=Object(p.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(R(n,a,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(X(i._id,u._id,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:y(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:y(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!u||!u.offeredTours)return null;var C=u.offeredTours.find((function(e){return e._id===t}));return C?r.a.createElement("div",null,r.a.createElement(pe.a,null,C.tourName),r.a.createElement(et.a,{celled:!0},r.a.createElement(et.a.Header,null,r.a.createElement(et.a.Row,null,r.a.createElement(et.a.HeaderCell,{name:"information"},"Tiedot"),i&&"Admin"===i.type&&Object.values(i.museums).map((function(e){return e._id})).includes(u._id)&&r.a.createElement(et.a.HeaderCell,{textAlign:"right"}," ",r.a.createElement(ve.a,{name:"openModal",onClick:function(){return h(!0)}},"Muokkaa")," "),i&&"Customer"===i.type&&r.a.createElement(et.a.HeaderCell,{textAlign:"right"}," ",r.a.createElement(ve.a,{name:"openModal",onClick:function(){return h(!1)}},"Varaa")," "),(i&&"Guide"===i.type||!i)&&r.a.createElement(et.a.HeaderCell,{name:"empty"}))),r.a.createElement(et.a.Body,null,r.a.createElement(et.a.Row,null,r.a.createElement(et.a.Cell,{name:"tourName"},"Nimi"),r.a.createElement(et.a.Cell,{name:"nameValue"},C.tourName)),r.a.createElement(et.a.Row,null,r.a.createElement(et.a.Cell,{name:"tourLanguages"},"Kielet"),r.a.createElement(et.a.Cell,{name:"languageValue"},C.possibleLanguages.map((function(e){return r.a.createElement("p",{key:e},e)})))),r.a.createElement(et.a.Row,null,r.a.createElement(et.a.Cell,{name:"tourLength"},"Kesto"),r.a.createElement(et.a.Cell,{name:"lengthValue"},C.lengthInMinutes)),r.a.createElement(et.a.Row,null,r.a.createElement(et.a.Cell,{name:"tourPrice"},"Hinta"),r.a.createElement(et.a.Cell,{name:"priceValue"},C.price)),r.a.createElement(et.a.Row,null,r.a.createElement(et.a.Cell,{name:"tourMax"},"Maksimikoko"),r.a.createElement(et.a.Cell,{name:"maxValue"},C.maxNumberOfPeople)),r.a.createElement(et.a.Row,null,r.a.createElement(et.a.Cell,{name:"tourInfo"},"Lis\xe4tiedot"),r.a.createElement(et.a.Cell,{name:"infoValue"},C.tourInfo)))),r.a.createElement(at,{modalOpen:f,onSubmit:S,onClose:function(){return y(!0)},initialTour:C}),r.a.createElement(ct,{modalOpen:O,onSubmit:_,onClose:function(){return y(!1)},tour:C,museum:u})):null},lt={username:"",password:""},ot=function(e){var t=e.onSubmit;return r.a.createElement(je.e,{initialValues:lt,onSubmit:function(e,a){var n=a.resetForm;t(e),n()},validate:function(e){var t={};return 0===e.username.length&&(t.username="Kentt\xe4 vaaditaan"),0===e.password.length&&(t.password="Kentt\xe4 vaaditaan"),t}},(function(e){var t=e.isValid,a=e.dirty;return r.a.createElement(je.d,{className:"form ui"},r.a.createElement(je.b,{label:"K\xe4ytt\xe4j\xe4nimi",placeholder:"K\xe4ytt\xe4j\xe4",name:"username",component:xe}),r.a.createElement(je.b,{label:"Salasana",placeholder:"Salasana",name:"password",component:xe}),r.a.createElement(ve.a,{id:"loginButton",type:"submit",name:"submit",disabled:!a||!t},"Kirjaudu sis\xe4\xe4n"))}))},it={name:"",username:"",password:"",type:"Customer",languages:[""]},st=[{label:"Asiakas",value:"Customer"},{label:"Yll\xe4pit\xe4j\xe4",value:"Admin"},{label:"Opas",value:"Guide"}],mt=function(e){var t=e.onSubmit;return r.a.createElement(je.e,{initialValues:it,onSubmit:function(e,a){var n=a.resetForm;t(e),n()},validate:function(e){var t={};return 0===e.username.length&&(t.username="Kentt\xe4 vaaditaan"),0===e.password.length&&(t.password="Kentt\xe4 vaaditaan"),0===e.name.length&&(t.name="Kentt\xe4 vaaditaan"),"Admin"!==e.type&&"Customer"!==e.type&&"Guide"!==e.type&&(t.type="K\xe4ytt\xe4j\xe4n t\xe4ytyy kuulua johonkin ennalta valittuun ryhm\xe4\xe4n"),t}},(function(e){var t=e.values,a=e.isValid,n=e.dirty;return r.a.createElement(je.d,{className:"form ui"},r.a.createElement(je.b,{label:"Nimi",placeholder:"Nimi",name:"name",component:xe}),r.a.createElement(je.b,{label:"K\xe4ytt\xe4j\xe4nimi",placeholder:"K\xe4ytt\xe4j\xe4",name:"username",component:xe}),r.a.createElement(je.b,{label:"Salasana",placeholder:"Salasana",name:"password",component:xe}),r.a.createElement(Ue,{label:"K\xe4ytt\xe4j\xe4tyyppi",name:"type",options:st}),"Guide"===t.type&&r.a.createElement(je.b,{label:"Kielitaito",name:"languages",component:Me,values:t.languages,fieldName:"languages"}),r.a.createElement(ve.a,{id:"registerationButton",type:"submit",name:"submit",disabled:!n||!a},"Lis\xe4\xe4 k\xe4ytt\xe4j\xe4"))}))},dt={login:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",{username:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},pt=function(){var e=Object(l.b)(),t=Object(se.f)(),a=function(){var a=Object(p.a)(d.a.mark((function a(n){var r,c,u;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.username,c=n.password,a.prev=1,a.next=4,dt.login(r,c);case 4:(u=a.sent)&&O(u),e(ee(u)),t.push("/user"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),e(ne({message:"V\xe4\xe4r\xe4t tunnukset",error:!0}));case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}(),n=function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(Y(a))}catch(n){e(ne({message:"K\xe4ytt\xe4j\xe4\xe4 ei voitu lis\xe4t\xe4",error:!0}))}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(pe.a,{as:"h1"},"Kirjaudu sis\xe4\xe4n tai luo k\xe4ytt\xe4j\xe4"),r.a.createElement(fe.a,{id:"basicGrid",columns:2,relaxed:"very",stackable:!0,divided:!0},r.a.createElement(fe.a.Column,null,r.a.createElement(ot,{onSubmit:a})),r.a.createElement(fe.a.Column,null,r.a.createElement(mt,{onSubmit:n}))))},ft=a(605),Et=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.login})),a=Object(se.f)(),n=function(e){a.push("/".concat(e))};return t._id?r.a.createElement("div",null,r.a.createElement(ft.a,{widths:4},r.a.createElement(ft.a.Item,{id:"logoutbarState",header:!0},"Kirjautunut sis\xe4\xe4n k\xe4ytt\xe4j\xe4n\xe4 ",t.username),r.a.createElement(ft.a.Item,{name:"mainPage",onClick:function(){return n("find/museums")}},"Etusivu"),r.a.createElement(ft.a.Item,{name:"userPage",onClick:function(){return n("user")}},"Oma sivu"),r.a.createElement(ft.a.Item,{name:"logout",onClick:function(){e(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(),n("login")}},"Kirjaudu ulos"))):r.a.createElement("div",null,r.a.createElement(ft.a,{widths:3},r.a.createElement(ft.a.Item,{id:"logoutbarState",header:!0},"Et ole kirjautunut sis\xe4\xe4n"),r.a.createElement(ft.a.Item,{name:"mainPage",onClick:function(){return n("find/museums")}},"Etusivu"),r.a.createElement(ft.a.Item,{name:"login",onClick:function(){return n("login")}},"Kirjaudu sis\xe4\xe4n")))},bt=function(){var e=Object(l.c)((function(e){return e})),t=Object(n.useState)({message:"",error:!1}),a=Object(he.a)(t,2),c=a[0],u=a[1],o=Object(n.useState)({message:"",error:!1}),i=Object(he.a)(o,2),s=i[0],m=i[1],d=Object(n.useState)({message:"",error:!1}),p=Object(he.a)(d,2),f=p[0],b=p[1],v=Object(n.useState)({message:"",error:!1}),O=Object(he.a)(v,2),j=O[0],h=O[1];Object(n.useEffect)((function(){u(e.museums.notification),setTimeout((function(){return u({message:"",error:!1})}),2e3)}),[e.museums.notification]),Object(n.useEffect)((function(){m(e.tours.notification),setTimeout((function(){return m({message:"",error:!1})}),2e3)}),[e.tours.notification]),Object(n.useEffect)((function(){b(e.users.notification),setTimeout((function(){return b({message:"",error:!1})}),2e3)}),[e.users.notification]),Object(n.useEffect)((function(){h(e.notification.notification),setTimeout((function(){return h({message:"",error:!1})}),2e3)}),[e.notification.notification]);var y=[Object(E.a)(Object(E.a)({},c),{},{key:0}),Object(E.a)(Object(E.a)({},s),{},{key:1}),Object(E.a)(Object(E.a)({},f),{},{key:2}),Object(E.a)(Object(E.a)({},j),{},{key:3})];return r.a.createElement("div",null,y.map((function(e){return r.a.createElement(pe.a,{key:e.key,color:e.error?"red":"blue"},e.message)})))},vt=a(593),Ot=a(161),jt=function(){var e=Object(n.useState)(0),t=Object(he.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),o=Object(he.a)(u,2),i=o[0],s=o[1],m=Object(n.useState)([]),d=Object(he.a)(m,2),p=d[0],f=d[1],E=Object(l.c)((function(e){return e.museums.museums})),b=Object(se.f)();Object(n.useEffect)((function(){f(i?Object.values(E).filter((function(e){return e.museumName.toLocaleLowerCase().includes(i.toLocaleLowerCase())})):Object.values(E))}),[i,E]);return r.a.createElement("div",null,r.a.createElement(Ze.a,{textAlign:"center"},r.a.createElement(pe.a,null,"L\xf6yd\xe4 museoita"),r.a.createElement(vt.a,{placeholder:"Hae museoita",onChange:function(e){s(e.target.value)}}),p.slice(0+10*a,10+10*a).map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(He.a,{centered:!0},r.a.createElement(He.a.Content,{header:e.museumName}),e.image&&r.a.createElement(Ot.a,null,r.a.createElement(Ge.a,{src:"http://localhost:3001/uploads/".concat(e.image),size:"small"})),r.a.createElement(He.a.Content,{description:e.museumInfo}),r.a.createElement(He.a.Content,{extra:!0},r.a.createElement(ve.a,{onClick:function(){return t=e._id,void b.push("/museum/".concat(t));var t}},"Tarkastele"))))})),r.a.createElement(fe.a,{id:"pageNumbers",centered:!0},Array.from(Array(function(){var e=Object.values(p).length;return e%10===0?e/10:(e-e%10)/10+1}()).keys()).map((function(e){return r.a.createElement(de.a,{key:e},r.a.createElement("p",{className:"centerText",onClick:function(){return c(e)}},e+1))})))))},ht=function(e){var t=e.tour;return r.a.createElement("div",null,r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Kierros: ")),r.a.createElement(de.a,null,t.tourName),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"P\xe4iv\xe4: ")),r.a.createElement(de.a,null,_e(t.date)),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Aika: ")),r.a.createElement(de.a,null,t.time))},yt=function(e){var t=e.tour;return r.a.createElement("div",null,r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Ryhm\xe4: ")),r.a.createElement(de.a,null,t.groupName),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Kieli: ")),r.a.createElement(de.a,null,t.chosenLanguage),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Varaajan s\xe4hk\xf6posti: ")),r.a.createElement(de.a,null,t.email),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Hinta: ")),r.a.createElement(de.a,null,t.price),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Maksutapa: ")),r.a.createElement(de.a,null,t.paymentMethod),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Kesto: ")),r.a.createElement(de.a,null,t.lengthInMinutes,"min"),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Osallistujia: ")),r.a.createElement(de.a,null,t.numberOfPeople),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Ik\xe4ryhm\xe4: ")),r.a.createElement(de.a,null,t.groupAge),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Lis\xe4tietoja ryhm\xe4st\xe4: ")),r.a.createElement(de.a,null,t.groupInfo),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Lis\xe4tietoja opastuksesta: ")),r.a.createElement(de.a,null,t.tourInfo),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Opas: ")),r.a.createElement(de.a,null,t.guide.name),r.a.createElement(de.a,{className:"addTopMarginSmall"},r.a.createElement("h4",null,"Vahvistettu: ")),r.a.createElement(de.a,null,t.confirmed?"Kyll\xe4":"Ei"))},gt=function(){var e=Object(l.c)((function(e){return e.users.users[e.login._id]})),t=Object(se.g)().id,a=Object(n.useState)(void 0),c=Object(he.a)(a,2),u=c[0],o=c[1];return Object(n.useEffect)((function(){if(e){if("Customer"===e.type){var a=e.reservedTours.find((function(e){return e._id===t}));o(a)}if("Admin"===e.type){var n=e.museums.find((function(e){return e.reservedTours.find((function(e){return e._id===t}))}));n&&o(n.reservedTours.find((function(e){return e._id===t})))}}}),[t,e]),e&&u?r.a.createElement("div",null,r.a.createElement(pe.a,null,"Varattu kierros"),r.a.createElement(fe.a,{id:"basicGrid",columns:"1"},r.a.createElement(de.a,null,r.a.createElement(ht,{tour:u}),r.a.createElement(yt,{tour:u})))):null},kt=function(){var e=Object(l.c)((function(e){return e.users.users[e.login._id]})),t=Object(se.f)();if(!e||"Customer"!==e.type)return r.a.createElement("div",null,"Mit\xe4\xe4n ei l\xf6ytynyt");return r.a.createElement("div",null,r.a.createElement(fe.a,{id:"basicGrid",centered:!0,columns:1},r.a.createElement(pe.a,{className:"title",textAlign:"center"},e.username),r.a.createElement(me.a,{centered:!0},r.a.createElement(pe.a,{textAlign:"center"},"Varatut opastukset")),e.reservedTours.map((function(e){return r.a.createElement(me.a,{centered:!0,name:"tourRow",key:e._id,onClick:function(){return a=e._id,void t.push("/reservation/".concat(a));var a},columns:"3"},r.a.createElement(de.a,{textAlign:"center"},r.a.createElement("h4",null,e.tourName," ")),r.a.createElement(de.a,{textAlign:"center"},r.a.createElement("p",null,e.time," ")),r.a.createElement(de.a,{textAlign:"center"},r.a.createElement("p",null,_e(e.date))))}))))},St=function(e){var t=e.mon,a=e.tue,n=e.wed,r=e.thu,c=e.fri,u=e.sat,l=e.sun;return!!(t&&a&&n&&r&&c&&u&&l)},_t=function(){var e,t,a,n,r=[];for(e=0;e<24;e++)for(t=0;t<60;t+=15)a=e<10?"0".concat(e.toString()):e.toString(),n=0===t?"0".concat(t.toString()):t.toString(),r=r.concat({label:"".concat(a,":").concat(n),value:"".concat(a,":").concat(n)});return r=r.concat({label:"Suljettu",value:"closed"})},Ct=[{name:"Maanantai",value:"mon"},{name:"Tiistai",value:"tue"},{name:"Keskiviikko",value:"wed"},{name:"Torstai",value:"thu"},{name:"Perjantai",value:"fri"},{name:"Lauantai",value:"sat"},{name:"Sunnuntai",value:"sun"}],Rt={museumName:"",museumInfo:"",openInfo:"",open:{mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},closed:{mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},location:"",lat:0,long:0,image:void 0},Tt=function(e){var t=e.onSubmit,a=e.onCancel;return r.a.createElement(je.e,{initialValues:Rt,onSubmit:function(e,a){var n=a.resetForm;t(e),n()},validate:function(e){var t={};return 0===e.museumName.length&&(t.museumName="Kentt\xe4 vaaditaan"),St(e.open)||(t.open="Kentt\xe4 vaaditaan"),St(e.closed)||(t.closed="Kentt\xe4 vaaditaan"),e.location||(t.location="Kentt\xe4 vaaditaan"),0===e.lat&&(t.lat="Kentt\xe4 vaaditaan"),0===e.long&&(t.long="Kentt\xe4 vaaditaan"),isNaN(e.lat)?t.lat="Luvun t\xe4ytyy olla numero":(e.lat<-90||e.lat>90)&&(t.lat="Luvun t\xe4ytyy olla -90 ja 90 v\xe4lill\xe4"),isNaN(e.long)?t.long="Luvun t\xe4ytyy olla numero":(e.long<-90||e.long>90)&&(t.long="Luvun t\xe4ytyy olla -90 ja 90 v\xe4lill\xe4"),t}},(function(e){var t=e.isValid,n=e.dirty;e.setFieldValue,e.setFieldTouched,e.values,e.errors,e.touched;return r.a.createElement(je.d,{className:"form ui"},r.a.createElement(je.b,{label:"Museon nimi",placeholder:"Museon nimi",name:"museumName",component:xe}),r.a.createElement(je.b,{label:"Museon tiedot",placeholder:"Museon tiedot",name:"museumInfo",component:xe}),r.a.createElement(je.b,{label:"Lis\xe4tietoja aukiolosta",placeholder:"Lis\xe4tietoja",name:"openInfo",component:xe}),r.a.createElement(je.b,{label:"Sijainti",placeholder:"Sijainti",name:"location",component:xe}),r.a.createElement(je.b,{label:"Leveyspiiri (latitude)",placeholder:"Leveyspiiri",name:"lat",component:xe}),r.a.createElement(je.b,{label:"Pituuspiiri (longitude)",placeholder:"Pituuspiiri",name:"long",component:xe}),r.a.createElement(Ae,{name:"image"}),r.a.createElement(fe.a,{className:"addTopMargin",columns:7,relaxed:!0,stackable:!0},Ct.map((function(e){return r.a.createElement(fe.a.Column,{className:"centerText",key:e.value},r.a.createElement("div",{className:"bottomMargin"},r.a.createElement(Fe.a,{basic:!0},e.name)),r.a.createElement(Ue,{label:"Auki",name:"open.".concat(e.value),options:_t()}),r.a.createElement(Ue,{label:"Kiinni",name:"closed.".concat(e.value),options:_t()}))}))),r.a.createElement(fe.a,null,r.a.createElement(fe.a.Row,{centered:!0,className:"addTopMarginSmall",columns:"2"},r.a.createElement(ve.a,{id:"submitMuseumModal",type:"submit",name:"submit",disabled:!n||!t},"Lis\xe4\xe4!"),r.a.createElement(ve.a,{id:"cancelMuseumModal",onClick:a,name:"cancelForm",color:"red"},"Peruuta"))))}))},wt=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit;return r.a.createElement(tt.a,{open:t,onClose:a,closeIcon:!0},r.a.createElement(tt.a.Header,{id:"modalHeader"},"P\xe4ivit\xe4 opastusta"),r.a.createElement(tt.a.Content,null,r.a.createElement(Tt,{onSubmit:n,onCancel:a})))},xt=function(){var e=Object(l.c)((function(e){return e.users.users[e.login._id]})),t=Object(l.b)(),a=Object(n.useState)(!1),c=Object(he.a)(a,2),u=c[0],o=c[1],i=Object(l.c)((function(e){return e.users.finished}));if(Object(n.useEffect)((function(){i&&t(I())}),[i,t]),!e||"Admin"!==e.type)return r.a.createElement("div",null,"Mit\xe4\xe4n ei l\xf6ytynyt");var s=function(){o(!1)},m=function(){var a=Object(p.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t(W(n,e._id));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:s();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"adminPage"},r.a.createElement(fe.a,{id:"basicGrid",columns:2,stackable:!0,textAlign:"center"},r.a.createElement(fe.a.Row,null,r.a.createElement(pe.a,null,"K\xe4ytt\xe4j\xe4n ",e.username," tiedot")),r.a.createElement(fe.a.Row,{className:"addTopMargin"},r.a.createElement(fe.a.Column,null,r.a.createElement("h4",null,"Kaikki museot: ")),r.a.createElement(fe.a.Column,null,r.a.createElement("h4",null,"K\xe4ytt\xe4j\xe4n tiedot: "))),r.a.createElement(fe.a.Row,null,r.a.createElement(fe.a.Column,null,e.museums&&e.museums.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement($e.b,{to:"/museum/".concat(e._id)},e.museumName))}))),r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,{columns:2,stackable:!0},r.a.createElement(fe.a.Column,null,r.a.createElement("b",null,"Nimi: ")),r.a.createElement(fe.a.Column,null,r.a.createElement("b",null,e.name)),r.a.createElement(fe.a.Column,null,r.a.createElement("b",null,"K\xe4ytt\xe4j\xe4tunnus: ")),r.a.createElement(fe.a.Column,null,r.a.createElement("b",null,e.username)),r.a.createElement(fe.a.Column,null,r.a.createElement("h4",null,"Tyyppi: ")),r.a.createElement(fe.a.Column,null,r.a.createElement("b",null,e.type))))),r.a.createElement(fe.a.Row,{className:"addTopMargin"},r.a.createElement(ve.a,{id:"addMuseumModalOpen",onClick:function(){o(!0)}},"Lis\xe4\xe4 museo!"))),r.a.createElement(wt,{modalOpen:u,onSubmit:f,onClose:s}))},Ut=a(604),Nt=function(e){var t=e.r;return r.a.createElement("div",null,r.a.createElement(me.a,null,r.a.createElement(Ut.a,{trigger:r.a.createElement("div",null,r.a.createElement(ht,{tour:t}))},r.a.createElement(Ut.a.Header,null,"Kaikki tiedot"),r.a.createElement(Ut.a.Content,null,r.a.createElement(yt,{tour:t})))))},Mt=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.users.users[e.login._id]})),a=Object(n.useState)([]),c=Object(he.a)(a,2),u=c[0],o=c[1];if(Object(n.useEffect)((function(){t&&"Guide"===t.type&&(o([]),t.museums.forEach((function(e){return e.reservedTours.forEach((function(e){e.confirmed||o((function(t){return t.concat(e)}))}))})))}),[t]),!t||"Guide"!==t.type)return null;var i=t.reservedTours.map((function(e){return e})),s=function(a){e(function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z.confirmTour(e,t);case 3:r=a.sent,n({type:"CONFIRM_TOUR_SUCCESS",payload:r,notification:{message:"Opastus varattu",error:!1}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"CONFIRM_TOUR_ERROR",notification:{message:a.t0.response.data,error:!0}});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(a,t._id))};return r.a.createElement("div",null,r.a.createElement(pe.a,null,t.name),r.a.createElement(fe.a,{textAlign:"center"},r.a.createElement(fe.a.Row,{columns:1},r.a.createElement(pe.a,null,"Opastukset")),r.a.createElement(me.a,{columns:3},r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,{name:"ownTours",textAlign:"center"},r.a.createElement(me.a,{columns:1},r.a.createElement(pe.a,null,"Omat opastukset")),i.length>0&&i.map((function(e){return new Date(e.date)>=new Date?r.a.createElement("div",{key:e._id},r.a.createElement(Nt,{r:e})):null})),0===i.length&&r.a.createElement("h3",null,"Ei varattuja opastuksia"))),r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,{name:"freeTours",textAlign:"center"},r.a.createElement(me.a,{columns:1},r.a.createElement(pe.a,null,"Vapaat opastukset")),u.length>0&&u.map((function(e){return!e.confirmed&&new Date(e.date)>=new Date?r.a.createElement("div",{key:e._id},r.a.createElement(Nt,{r:e}),r.a.createElement(me.a,null,r.a.createElement(ve.a,{onClick:function(){return s(e._id)}},"Varaa"))):null})),0===u.length&&r.a.createElement("h3",null,"Ei vapaita opastuksia"))),r.a.createElement(fe.a.Column,null,r.a.createElement(fe.a,{name:"pastTours",textAlign:"center"},r.a.createElement(me.a,{columns:1},r.a.createElement(pe.a,null,"Menneet opastukset")),i.length>0&&i.map((function(e){return e.confirmed&&new Date(e.date)<new Date?r.a.createElement("div",{key:e._id},r.a.createElement(Nt,{r:e})):null})),0===i.length&&r.a.createElement("h3",null,"Ei menneit\xe4 opastuksia opastuksia"))))))},At=function(){var e=Object(l.c)((function(e){return e.users.users[e.login._id]}));return e?"Customer"===e.type?r.a.createElement(kt,null):"Admin"===e.type?r.a.createElement(xt,null):"Guide"===e.type?r.a.createElement(Mt,null):null:r.a.createElement("div",{id:"emptyUserPage"})};var Dt=function(){var e=Object(l.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.getAll();case 3:a=e.sent,t({type:"GET_ALL_TOURS_SUCCESS",payload:a,notification:{message:"",error:!1}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_ALL_TOURS_ERROR",notification:{message:e.t0.response.data,error:!0}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e(I()),e(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.getAll();case 3:a=e.sent,t({type:"GET_USERS_SUCCESS",payload:a,notification:{message:"",error:!1}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_USERS_ERROR",notification:{message:e.t0.response.data,error:!0}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.getKey();case 3:a=e.sent,t({type:"GET_KEY",payload:a}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());var t=j();t&&e(ee(t))}),[e]),r.a.createElement("div",null,r.a.createElement($e.a,null,r.a.createElement(Ze.a,{textAlign:"center"},r.a.createElement(Et,null),r.a.createElement(bt,null),r.a.createElement(se.c,null,r.a.createElement(se.a,{path:"/login",render:function(){return r.a.createElement(pt,null)}}),r.a.createElement(se.a,{path:"/museum/:museumid/tour/:tourid",render:function(){return r.a.createElement(ut,null)}}),r.a.createElement(se.a,{path:"/museum/:id",render:function(){return r.a.createElement(Xe,null)}}),r.a.createElement(se.a,{path:"/user/",render:function(){return r.a.createElement(At,null)}}),r.a.createElement(se.a,{path:"/find/museums",render:function(){return r.a.createElement(jt,null)}}),r.a.createElement(se.a,{path:"/reservation/:id",render:function(){return r.a.createElement(gt,null)}})))))};a(578),a(579),a(580);u.a.render(r.a.createElement(l.a,{store:ie},r.a.createElement(Dt,null)),document.getElementById("root"))}},[[339,1,2]]]);
//# sourceMappingURL=main.5cf213eb.chunk.js.map